<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Immunization-Root.xspec"
        stylesheet="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/SaxonPE-cda2fhir.xslt"
        date="2022-01-04T15:29:30.553253+10:00">
   <scenario id="scenario1"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Immunization-Root.xspec">
      <label>Scenario for testing template with match 'cda:substanceAdministration[cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.52'][@moodCode = 'EVN']'</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"/>
      </input-wrap>
      <result href="result-d598e0.xml"/>
      <test id="scenario1-expect1" successful="true">
         <label>There should be two Immunization resources</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization) = 2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect2" successful="true">
         <label>There should be an Immunization.meta.profile=http://hl7.org/fhir/us/core/StructureDefinition/us-core-immunization</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:meta/fhir:profile[@value='http://hl7.org/fhir/us/core/StructureDefinition/us-core-immunization'])&gt;0"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect3" successful="true">
         <label>There should be two Immunization.identifier </label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:identifier)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect4" successful="true">
         <label>There should be an Immunization.value exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:identifier/fhir:value)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect5" successful="true">
         <label>There should be two Immunization.status</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:status)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect6" successful="true">
         <label>There should be two Immunization.vaccineCode.coding.system exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:vaccineCode/fhir:coding/fhir:system)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect7" successful="true">
         <label>There should be an Immunization.vaccineCode.coding.code exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:vaccineCode/fhir:coding/fhir:code)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect8" successful="true">
         <label>There should be an Immunization.vaccineCode.coding.display exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:vaccineCode/fhir:coding/fhir:display)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect9" successful="true">
         <label>There should be an Immunization.patient.reference exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:patient/fhir:reference)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect10" successful="true">
         <label>There should be an Immunization.occurenceDateTime exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:occurrenceDateTime)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect11" successful="true">
         <label>There should be an Immunization.primarySource exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:primarySource)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect12" successful="true">
         <label>There should be an Immunization.route.coding.system exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:route/fhir:coding/fhir:system)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect13" successful="true">
         <label>There should be an Immunization.route.coding.code exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:route/fhir:coding/fhir:code)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect14" successful="true">
         <label>There should be an Immunization.route.coding.display exists</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:route/fhir:coding/fhir:display)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect15" successful="true">
         <label>There should be an Immunization.doseQuantity.value</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:doseQuantity/fhir:value)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect16" successful="true">
         <label>There should be an Immunization.doseQuantity.unit</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Immunization/fhir:doseQuantity/fhir:unit)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
</report>
