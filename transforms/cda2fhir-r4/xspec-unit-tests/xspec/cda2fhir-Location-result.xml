<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Location.xspec"
        stylesheet="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/cda2fhir-Location.xslt"
        date="2022-01-04T15:29:35.642653+10:00">
   <scenario id="scenario1"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Location.xspec">
      <label>Scenario for testing template with match 'cda:location</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"
                    select="//cda:componentOf/cda:encompassingEncounter/cda:location"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <Location xmlns="http://hl7.org/fhir">
               <meta>
                  <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-location"/>
                  <!--CDA participant: ClinicalDocument[templateId/@root='2.16.840.1.113883.10.20.15.2'][templateId/@extension='2021-01-01']/componentOf/encompassingEncounter/location-->
               </meta>
               <identifier>
                  <system value="http://hl7.org/fhir/sid/us-npi"/>
                  <value value="77777777777"/>
               </identifier>
               <name value="Good Health Hospital"/>
               <type>
                  <coding>
                     <system value="http://terminology.hl7.org/CodeSystem/v3-RoleCode"/>
                     <code value="OF"/>
                     <display value="Outpatient facility"/>
                  </coding>
               </type>
               <telecom>
                  <system value="phone"/>
                  <value value="1+(555)-555-1212"/>
                  <use value="work"/>
               </telecom>
               <telecom>
                  <system value="fax"/>
                  <value value="1+(555)-555-3333"/>
                  <use value="work"/>
               </telecom>
               <address>
                  <line value="1000 Hospital Lane"/>
                  <city value="Ann Arbor"/>
                  <state value="MI"/>
                  <postalCode value="99999"/>
                  <country value="US"/>
               </address>
            </Location>
         </content-wrap>
      </result>
      <test id="scenario1-expect1" successful="true">
         <label>This encompassingEncounter SHOULD contain zero or one [0..1] location (CONF:4411-11)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect2" successful="true">
         <label>The location, if present, SHALL contain exactly one [1..1] healthCareFacility (CONF:4411-12)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:name) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect3" successful="true">
         <label>This healthCareFacility SHALL contain at least one [1..*] id (CONF:4411-13)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:identifier) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect4" successful="true">
         <label>Such ids SHALL contain exactly one [1..1] @root (CONF:4411-28)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:identifier/fhir:system) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect5" successful="true">
         <label>Such ids MAY contain zero or one [0..1] @extension (CONF:4411-29)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:identifier/fhir:value) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect6" successful="true">
         <label>This healthCareFacility SHALL contain exactly one [1..1] code (system) (CONF:4411-14)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:type/fhir:coding/fhir:system) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect7" successful="true">
         <label>This healthCareFacility SHALL contain exactly one [1..1] code (code) (CONF:4411-14)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:type/fhir:coding/fhir:code) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect8" successful="true">
         <label>This healthCareFacility SHALL contain exactly one [1..1] code (display) (CONF:4411-14)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:type/fhir:coding/fhir:display) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect9" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect10" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (street) (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address/fhir:line) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect11" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (city) (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address/fhir:city) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect12" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (state) (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address/fhir:state) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect13" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (zip code) (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address/fhir:postalCode) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect14" successful="true">
         <label>This location SHALL contain exactly one [1..1] US Realm Address (country) (CONF:4411-32)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:address/fhir:country) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect15" successful="true">
         <label>This healthCareFacility SHALL contain exactly one [1..1] serviceProviderOrganization (CONF:4411-16)                          This serviceProviderOrganization SHALL contain at least one [1..*] telecom (CONF:4411-34).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:telecom) &gt; 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect16" successful="true">
         <label>This serviceProviderOrganization SHALL contain at least one [1..*] telecom (system)(CONF:4411-34).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:telecom/fhir:system) &gt; 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect17" successful="true">
         <label>This serviceProviderOrganization SHALL contain at least one [1..*] telecom (use)(CONF:4411-34).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:telecom/fhir:use) &gt; 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect18" successful="true">
         <label>This serviceProviderOrganization SHALL contain at least one [1..*] telecom (value)(CONF:4411-34).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Location/fhir:telecom/fhir:value) &gt; 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
</report>
