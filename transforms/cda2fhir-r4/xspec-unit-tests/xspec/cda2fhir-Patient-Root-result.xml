<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Patient-Root.xspec"
        stylesheet="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/SaxonPE-cda2fhir.xslt"
        date="2022-01-04T15:30:07.251043+10:00">
   <scenario id="scenario1"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Patient-Root.xspec">
      <label>Scenario for testing template 'cda:recordTarget'</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/RR-R1/RR-CDA-001_R1.xml"/>
      </input-wrap>
      <result href="result-d243e0.xml"/>
      <test id="scenario1-expect1" successful="true">
         <label>There should be an entry.resource.Patient</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(/fhir:Bundle/fhir:entry/fhir:resource/fhir:Patient)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario2"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Patient-Root.xspec">
      <label>Scenario for testing template with patient extensions</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/RR-R1/RR-CDA-001_R1.xml"/>
      </input-wrap>
      <result href="result-d438e0.xml"/>
      <test id="scenario2-expect1" successful="true">
         <label>There should be one Patient</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect2" successful="true">
         <label>There should be an eCR Patient meta.profile</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:meta/fhir:profile[@value='http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-patient'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect3" successful="true">
         <label>There should be a us-core-race extension</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:extension[@url='http://hl7.org/fhir/us/core/StructureDefinition/us-core-race'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect4" successful="true">
         <label>There should be a us-core-ethnicity extension</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:extension[@url='http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect5" successful="true">
         <label>There should be 2 identifiers</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:identifier)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect6" successful="true">
         <label>There should be 2 telecoms</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:telecom)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect7" successful="true">
         <label>There should be 1 gender</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:gender)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect8" successful="true">
         <label>There should be 1 birthDate</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:birthDate)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect9" successful="true">
         <label>There should be 1 deceasedDateTime</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:deceasedBoolean)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect10" successful="true">
         <label>There should be 1 address</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:address)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect11" successful="true">
         <label>There should be 1 guardian</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:contact/fhir:relationship/fhir:coding/fhir:code)=0"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect12" successful="true">
         <label>There should be 1 name</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:name)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect13" successful="true">
         <label>There should be 1 communication.language</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:communication/fhir:language/fhir:coding/fhir:code)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect14" successful="true">
         <label>There should be 1 communication.preferred</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:Patient/fhir:communication/fhir:preferred)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
</report>
