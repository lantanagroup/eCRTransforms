<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Procedure.xspec"
        stylesheet="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/cda2fhir-Procedure.xslt"
        date="2022-01-04T15:30:17.939725+10:00">
   <scenario id="scenario1"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Procedure.xspec">
      <label>Scenario for testing template with match 'cda:procedure[cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.14'][@moodCode = 'EVN']'and mode 'bundle-entry'</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/CCDA - Fred Rick - Cerner HIMSS.xml"
                    select="//cda:procedure[cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.14'][@moodCode = 'EVN']"
                    mode="bundle-entry"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <entry xmlns="http://hl7.org/fhir">
               <fullUrl value="urn:uuid:"/>
               <resource>
                  <Procedure><!--No profiles found for any of the following templates: urn:hl7ii:2.16.840.1.113883.10.20.22.4.14-->
                     <identifier>
                        <system value="urn:ietf:rfc:3986"/>
                        <value value="urn:uuid:6dcbb09f-a0b5-40e4-a5b2-e5b9b17f4ed3"/>
                     </identifier>
                     <status value="completed"/>
                     <code>
                        <coding>
                           <system value="http://snomed.info/sct"/>
                           <code value="79516005"/>
                           <display value="Renal arteriography (procedure)"/>
                        </coding>
                        <text value="Renal angiogram"/>
                     </code>
                     <subject>
                        <reference value="urn:uuid:"/>
                     </subject>
                     <performedPeriod>
                        <start value="2017-02-02T00:00:00.000-06:00"/>
                        <end value="2017-02-02T00:00:00.000-06:00"/>
                     </performedPeriod>
                     <asserter>
                        <reference value="urn:uuid:"/>
                     </asserter>
                  </Procedure>
               </resource>
            </entry>
            <entry xmlns="http://hl7.org/fhir">
               <fullUrl value="urn:uuid:"/>
               <resource>
                  <Procedure><!--No profiles found for any of the following templates: urn:hl7ii:2.16.840.1.113883.10.20.22.4.14-->
                     <identifier>
                        <system value="urn:ietf:rfc:3986"/>
                        <value value="urn:uuid:9e7ded36-fb13-4a6e-a3a9-83895aecb53d"/>
                     </identifier>
                     <status value="completed"/>
                     <code>
                        <coding>
                           <system value="http://snomed.info/sct"/>
                           <code value="257556004"/>
                           <display value="Surgery (qualifier value)"/>
                        </coding>
                        <text value="Surgery, elective"/>
                     </code>
                     <subject>
                        <reference value="urn:uuid:"/>
                     </subject>
                     <performedPeriod>
                        <start value="2017-11-28T00:00:00.000-06:00"/>
                        <end value="2017-11-28T00:00:00.000-06:00"/>
                     </performedPeriod>
                     <asserter>
                        <reference value="urn:uuid:"/>
                     </asserter>
                  </Procedure>
               </resource>
            </entry>
         </content-wrap>
      </result>
      <test id="scenario1-expect1" successful="true">
         <label>There should be Two Procedure resources</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:entry/fhir:resource/fhir:Procedure)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario2"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-Procedure.xspec">
      <label>Scenario for testing template with match 'cda:procedure[cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.14'][@moodCode = 'EVN']'</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/CCDA - Fred Rick - Cerner HIMSS.xml"
                    select="//cda:procedure[cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.14'][@moodCode = 'EVN']"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <Procedure xmlns="http://hl7.org/fhir"><!--No profiles found for any of the following templates: urn:hl7ii:2.16.840.1.113883.10.20.22.4.14-->
               <identifier>
                  <system value="urn:ietf:rfc:3986"/>
                  <value value="urn:uuid:6dcbb09f-a0b5-40e4-a5b2-e5b9b17f4ed3"/>
               </identifier>
               <status value="completed"/>
               <code>
                  <coding>
                     <system value="http://snomed.info/sct"/>
                     <code value="79516005"/>
                     <display value="Renal arteriography (procedure)"/>
                  </coding>
                  <text value="Renal angiogram"/>
               </code>
               <subject>
                  <reference value="urn:uuid:"/>
               </subject>
               <performedPeriod>
                  <start value="2017-02-02T00:00:00.000-06:00"/>
                  <end value="2017-02-02T00:00:00.000-06:00"/>
               </performedPeriod>
               <asserter>
                  <reference value="urn:uuid:"/>
               </asserter>
            </Procedure>
            <Procedure xmlns="http://hl7.org/fhir"><!--No profiles found for any of the following templates: urn:hl7ii:2.16.840.1.113883.10.20.22.4.14-->
               <identifier>
                  <system value="urn:ietf:rfc:3986"/>
                  <value value="urn:uuid:9e7ded36-fb13-4a6e-a3a9-83895aecb53d"/>
               </identifier>
               <status value="completed"/>
               <code>
                  <coding>
                     <system value="http://snomed.info/sct"/>
                     <code value="257556004"/>
                     <display value="Surgery (qualifier value)"/>
                  </coding>
                  <text value="Surgery, elective"/>
               </code>
               <subject>
                  <reference value="urn:uuid:"/>
               </subject>
               <performedPeriod>
                  <start value="2017-11-28T00:00:00.000-06:00"/>
                  <end value="2017-11-28T00:00:00.000-06:00"/>
               </performedPeriod>
               <asserter>
                  <reference value="urn:uuid:"/>
               </asserter>
            </Procedure>
         </content-wrap>
      </result>
      <test id="scenario2-expect1" successful="true">
         <label>There should be two Procedure.system</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:identifier/fhir:system)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect2" successful="true">
         <label>There should be an Procedure.value.value</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:identifier/fhir:value)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect3" successful="true">
         <label>There should be two Procedure.status.value=completed</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:status)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect4" successful="true">
         <label>There should be two Procedure.code.coding.system</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:code/fhir:coding/fhir:system)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect5" successful="true">
         <label>There should be an Procedure.code.coding.code</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:code/fhir:coding/fhir:code)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect6" successful="true">
         <label>There should be an Procedure.code.coding.display</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:code/fhir:coding/fhir:display)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect7" successful="true">
         <label>There should be an Procedure.subject.reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:subject/fhir:reference)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect8" successful="true">
         <label>There should be a Procedure.performedPeriod.start</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:performedPeriod/fhir:start)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect9" successful="true">
         <label>There should be a Procedure.performedPeriod.end</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:performedPeriod/fhir:end)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect10" successful="true">
         <label>There should be an Procedure.asserter.reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(fhir:Procedure/fhir:asserter/fhir:reference)=2"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
</report>
