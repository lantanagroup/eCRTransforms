<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-ServiceRequest-Root.xspec"
        stylesheet="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/SaxonPE-cda2fhir.xslt"
        date="2022-01-04T15:30:22.955918+10:00">
   <scenario id="scenario1"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-ServiceRequest-Root.xspec">
      <label>Scenario for testing template Initial Case Report Trigger Code Planned Procedure [2.16.840.1.113883.10.20.15.2.3.42]</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"/>
      </input-wrap>
      <result href="result-d598e0.xml"/>
      <test id="scenario1-expect1" successful="true">
         <label>There should be one Service Request resource with identifier 9a6d1bac-17d3-4195-89c4-1121bc809b5a</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest/fhir:identifier/fhir:value[@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect2" successful="true">
         <label>SHALL contain exactly one [1..1] code (CONF:1098-31976)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:code)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect3" successful="true">
         <label>SHALL contain exactly one [1..1] statusCode (CONF:1098-30446)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:status)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect4" successful="true">
         <label>This statusCode SHALL contain exactly one [1..1] @code=active Active (CONF:1098-31978)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:status[@value='active'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect5" successful="true">
         <label>SHALL contain exactly one [1..1] @moodCode, (CONF:1098-8569).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:intent)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect6" successful="true">
         <label>@moodCode SHALL be selected from ValueSetPlanned moodCode (Act/Encounter/Procedure)(CONF:1098-8569)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:intent[@value='order'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect7" successful="true">
         <label>SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-30447)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:occurrenceDateTime)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect8" successful="true">
         <label>MAY contain zero or more [0..*] entryRelationship (CONF:1098-31985)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:subject)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect9" successful="true">
         <label>entryRelationship SHALL contain exactly one [1..1] @typeCode=SUBJ Has Subject (CONF:1098-31986)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:subject/fhir:reference)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect10" successful="true">
         <label>SHOULD contain zero or one [0..1] Author Participation (CONF:1098-31979)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:requester)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario1-expect11" successful="true">
         <label>SHOULD contain zero or one [0..1] Author Participation (CONF:1098-31979) Reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:9a6d1bac-17d3-4195-89c4-1121bc809b5a']/fhir:requester/fhir:reference)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario2"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-ServiceRequest-Root.xspec">
      <label>Scenario for testing template Initial Case Report Trigger Code Lab Test Order [2.16.840.1.113883.10.20.15.2.3.4]'</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"/>
      </input-wrap>
      <result href="result-d1175e0.xml"/>
      <test id="scenario2-expect1" successful="true">
         <label>There should be one Service Request resource with identifier b52bee94-c34b-4e2c-8c15-5ad9d6def205</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest/fhir:identifier/fhir:value[@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect2" successful="true">
         <label>There should be a ServiceRequest.meta.profile=http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:meta/fhir:profile[@value='http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest'])&gt;0"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect3" successful="true">
         <label>SHALL contain exactly one [1..1] code (CONF:4411-325).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:code)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect4" successful="true">
         <label>The Service Request Must contain one Status</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:status)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect5" successful="true">
         <label>This statusCode SHALL contain exactly one [1..1] code=active </label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:status[@value='active'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect6" successful="true">
         <label>3. SHALL contain exactly one [1..1] @moodCode=RQO Request </label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:intent)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect7" successful="true">
         <label>@moodCode CodeSystem: HL7ActMood urn:oid:2.16.840.1.113883.5.1001 STATIC) (CONF:4411-318)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:intent[@value='order'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect8" successful="true">
         <label>SHALL contain exactly one [1..1] effectiveTime (CONF:1098-30893)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:occurrenceDateTime)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect9" successful="true">
         <label>The Service Request Must contain one subject</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:subject)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario2-expect10" successful="true">
         <label>The Service Request Subject should have type Reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def205']/fhir:subject/fhir:reference)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario3"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-ServiceRequest-Root.xspec">
      <label>Scenario for testing template Initial Case Report Trigger Code Planned Act [2.16.840.1.113883.10.20.15.2.3.41]</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"/>
      </input-wrap>
      <result href="result-d1749e0.xml"/>
      <test id="scenario3-expect1" successful="true">
         <label>There should be an one Service Request resource with identifier 7658963e-54da-496f-bf18-dea1dddaa3b0</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest/fhir:identifier/fhir:value[@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect2" successful="true">
         <label>There should be ServiceRequest.meta.profile=http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:meta/fhir:profile[@value='http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect3" successful="true">
         <label>SHALL contain exactly one [1..1] code (CONF:4411-325).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:code)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect4" successful="true">
         <label>The Service Request Must contain one Status</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:status)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect5" successful="true">
         <label>This statusCode SHALL contain exactly one [1..1] code=active</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:status[@value='active'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect6" successful="true">
         <label>SHALL contain exactly one [1..1] @moodCode=RQO Request</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:intent)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect7" successful="true">
         <label>@moodCode CodeSystem: HL7ActMood urn:oid:2.16.840.1.113883.5.1001 STATIC) (CONF:4411-318)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:intent[@value='plan'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect8" successful="true">
         <label>SHALL contain exactly one [1..1] effectiveTime (CONF:1098-30893)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:occurrenceDateTime)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect9" successful="true">
         <label>The Service Request Must contain one subject</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:subject)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario3-expect10" successful="true">
         <label>The Service Request Subject should have type Reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:7658963e-54da-496f-bf18-dea1dddaa3b0']/fhir:subject/fhir:reference)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario4"
             xspec="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/transforms/cda2fhir-r4/xspec-unit-tests/cda2fhir-ServiceRequest-Root.xspec">
      <label>Scenario for testing template Initial Case Report Trigger Code Planned Observation [2.16.840.1.113883.10.20.15.2.3.43]</label>
      <input-wrap xmlns="">
         <x:context xmlns:cda="urn:hl7-org:v3"
                    xmlns:fhir="http://hl7.org/fhir"
                    xmlns:lcg="http://www.lantanagroup.com"
                    xmlns:x="http://www.jenitennison.com/xslt/xspec"
                    href="file:/C:/Users/minigrrl/Dropbox/12_SourceControl/GitHub/Lantana/FHIRTransforms/samples/cda/eICR-R3/eICR-CDA-001_R3.xml"/>
      </input-wrap>
      <result href="result-d2323e0.xml"/>
      <test id="scenario4-expect1" successful="true">
         <label>There should be one Service Request resource with identifier b52bee94-c34b-4e2c-8c15-5ad9d6def204</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest/fhir:identifier/fhir:value[@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']) = 1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect2" successful="true">
         <label>There should be ServiceRequest.meta.profile=http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:meta/fhir:profile[@value='http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-servicerequest'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect3" successful="true">
         <label>SHALL contain exactly one [1..1] code (CONF:4411-325).</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:code)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect4" successful="true">
         <label>The Service Request Must contain one Status</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:status)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect5" successful="true">
         <label>This statusCode SHALL contain exactly one [1..1] code=active</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:status[@value='active'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect6" successful="true">
         <label>SHALL contain exactly one [1..1] @moodCode=RQO Request</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:intent)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect7" successful="true">
         <label>@moodCode CodeSystem: HL7ActMood urn:oid:2.16.840.1.113883.5.1001 STATIC) (CONF:4411-318)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:intent[@value='plan'])=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect8" successful="true">
         <label>SHALL contain exactly one [1..1] effectiveTime (CONF:1098-30893)</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:occurrenceDateTime)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect9" successful="true">
         <label>The Service Request Must contain one subject</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:subject)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
      <test id="scenario4-expect10" successful="true">
         <label>The Service Request Subject should have type Reference</label>
         <expect-test-wrap xmlns="">
            <x:expect xmlns:cda="urn:hl7-org:v3"
                      xmlns:fhir="http://hl7.org/fhir"
                      xmlns:lcg="http://www.lantanagroup.com"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      test="count(//fhir:ServiceRequest[fhir:identifier/fhir:value/@value='urn:uuid:b52bee94-c34b-4e2c-8c15-5ad9d6def204']/fhir:subject/fhir:reference)=1"/>
         </expect-test-wrap>
         <expect select="()"/>
      </test>
   </scenario>
</report>
